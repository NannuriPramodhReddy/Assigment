// src/App.js
import React, { useState, useEffect } from 'react';
import ContainerImageList from './components/ContainerImageList';
import ScanResultList from './components/ScanResultList';
import ScanResultDetail from './components/ScanResultDetail';
import { getScanResultsForImage } from './services/api';

const App = () => {
    const [containerImages, setContainerImages] = useState([]);
    const [selectedImageId, setSelectedImageId] = useState(null);

    useEffect(() => {
        // Fetch initial container images from backend
        // This is a mock example; you can replace with a real API endpoint to fetch container images
        setContainerImages([
            { id: '1', imageName: 'nginx', imageTag: 'latest' },
            { id: '2', imageName: 'alpine', imageTag: '3.14' },
        ]);
    }, []);

    return (
        <div>
            <h1>Container Vulnerability Scanner</h1>
            <ContainerImageList images={containerImages} />
            
            {selectedImageId && (
                <>
                    <ScanResultList imageId={selectedImageId} />
                    <ScanResultDetail scanId={selectedImageId} />
                </>
            )}
        </div>
    );
};

export default App;
